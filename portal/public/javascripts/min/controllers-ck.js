"use strict";app.controller("DashboardCtrl",function(t,e,n,s,o){t.stats={comp_count:0,test_plan_count:0,test_count:0},t.isActive=function(t){return t===n.path()},t.stats=s.get();var a=!1;t.hideSidebar=function(){a?(t.sidebarClass="",a=!1):(t.sidebarClass="collapsed",a=!0)},o.on("init",function(t){}),o.on("get:stats",function(e){t.stats=e})}),app.controller("ReportsCtrl",function(t,e){}),app.controller("LoginCtrl",function(t,e,n,s,o){t.user={username:"",password:""},t.loginUser=function(){o.login(t.user),e.currentUser=t.user.username,n.path("dashboard")},t.logoutUser=function(){o.logout(),n.path("/")}}),app.controller("LogoutCtrl",function(t,e,n,s){s.logout(),e.path("/login")}),app.controller("ComponentListCtrl",function(t,e,n,s,o,a,l){t.busy=!1,o.query(function p(e){t.components=e}),t.getData=function(e,s){t.queryData=n("filter")(e,s)},t.deleteComponent=function(e){t.component=a.delete({componentId:e},function n(){o.query(function e(n){t.components=n}),l.emit("get:stats")})};var c=!1;t.createComponent=function(){c?(t.createComponentClass="",s(function(){t.displayBlock=""},500),c=!1):(t.displayBlock="display-block",s(function(){t.createComponentClass="display-create"},100),c=!0)},t.moreComponents=function(){if(t.components){if(t.busy)return;t.busy=!0;var e=t.components[t.components.length-1].pk_component;o.query({after:e},function n(e){e[0]&&t.components.push(e[0]),t.busy=!1})}}}),app.controller("ComponentNewCtrl",function(t,e,n,s){t.heading="Create new Component",t.submitLabel="Create Component",t.component={name:""},t.submitFunction=function(){t.component=n.save(t.component,function o(t){s.emit("get:stats"),e.path("components/"+t.insertId)},function a(){console.log("Error: failed to save component.")})}}),app.controller("ComponentViewCtrl",function(t,e,n,s,o){t.busy=!1,s.get({componentId:e.componentId},function l(e){t.component=e.component,t.test_plans=e.test_plans}),t.addTestPlan=function(e,n,a){e===a?o.delete({fk_component:e,fk_test_plan:n},function l(){s.get({componentId:e},function n(e){t.component=e.component,t.test_plans=e.test_plans})}):o.save({fk_component:e,fk_test_plan:n},function c(){s.get({componentId:e},function n(e){t.component=e.component,t.test_plans=e.test_plans})})},t.removeTestPlan=function(e,n){o.delete({fk_component:e,fk_test_plan:n},function a(){s.get({componentId:e},function n(e){t.component=e.component,t.test_plans=e.test_plans})})};var a=!1;t.createTestPlan=function(){a?(t.createTestPlanClass="",n(function(){t.displayBlock=""},500),a=!1):(t.displayBlock="display-block",n(function(){t.createTestPlanClass="display-create"},100),a=!0)},t.moreTestPlans=function(){if(t.test_plans){if(t.busy)return;t.busy=!0;var n=t.test_plans[t.test_plans.length-1].pk_test_plan;s.get({componentId:e.componentId,after:n},function o(e){if(e&&e.test_plans)for(var n=e.test_plans,s=0;s<n.length;s++)t.test_plans.push(n[s]);t.busy=!1})}}}),app.controller("ComponentEditCtrl",function(t,e,n,s){t.heading="Update Component",t.submitLabel="Update Component",t.component=s.get({componentId:e.componentId}),t.submitFunction=function(){t.component=s.save({componentId:e.componentId},t.component,function o(){n.path("components")},function a(){console.log("Error: failed to update component.")})}}),app.controller("ComponentDeleteCtrl",function(t,e,n,s,o,a){t.component=s.delete({componentId:e.componentId},function l(){n.path("components"),a.emit("get:stats")})}),app.controller("TestPlanListCtrl",function(t,e,n,s,o,a,l){t.busy=!1,o.query(function p(e){t.test_plans=e}),t.getData=function(e,s){t.queryData=n("filter")(e,s)};var c=!1;t.createTestPlan=function(){c?(t.createTestPlanClass="",s(function(){t.displayBlock=""},500),c=!1):(t.displayBlock="display-block",s(function(){t.createTestPlanClass="display-create"},100),c=!0)},t.deleteTestPlan=function(e){t.component=a.delete({testPlanId:e},function n(){o.query(function e(n){t.test_plans=n}),l.emit("get:stats")})},t.moreTestPlans=function(){if(t.test_plans){if(t.busy)return;t.busy=!0;var e=t.test_plans[t.test_plans.length-1].pk_test_plan;o.query({after:e},function n(e){e[0]&&t.test_plans.push(e[0]),t.busy=!1})}}}),app.controller("TestPlanNewCtrl",function(t,e,n,s){t.heading="Create New Test Plan",t.submitLabel="Create Test Plan",t.test_plan={name:"",description:""},t.testPlanSubmit=function(){t.test_plan=n.save(t.test_plan,function o(t){e.path("test_plans/"+t.insertId),s.emit("get:stats")},function a(){console.log("Error: failed to save test plan")})}}),app.controller("TestPlanViewCtrl",function(t,e,n,s,o,a){s.get({testPlanId:e.testPlanId},function c(e){t.test_plan=e.test_plan,t.tests=e.tests});var l=!1;t.createTest=function(){l?(t.createTestClass="",n(function(){t.displayBlock=""},500),l=!1):(t.displayBlock="display-block",n(function(){t.createTestClass="display-create"},100),l=!0)},t.deleteTest=function(e,n){t.component=o.delete({testPlanId:e,testId:n},function l(){s.get({testPlanId:e},function n(e){t.tests=e.tests}),a.emit("get:stats")})},t.moreTests=function(){if(t.tests){if(t.busy)return;t.busy=!0;var n=t.tests[t.tests.length-1].pk_test;s.get({testPlanId:e.testPlanId,after:n},function o(e){if(e&&e.tests)for(var n=e.tests,s=0;s<n.length;s++)t.tests.push(n[s]);t.busy=!1})}}}),app.controller("TestPlanEditCtrl",function(t,e,n,s){t.heading="Update Test Plan",t.submitLabel="Update Test Plan",t.test_plan=s.get({testPlanId:e.testPlanId}),t.testPlanSubmit=function(){t.test_plan=s.save({testPlanId:e.testPlanId},t.test_plan,function o(){n.path("test_plans")},function a(){console.log("failed to update test plan")})}}),app.controller("TestPlanDeleteCtrl",function(t,e,n,s,o){t.component=s.delete({testPlanId:e.testPlanId},function a(){n.path("test_plans"),o.emit("get:stats")})}),app.controller("TestListCtrl",function(t,e,n,s,o,a){t.busy=!1,t.test_plan=e.testPlanId,t.tests=o.query({testPlanId:e.testPlanId}),t.getData=function(e,s){t.queryData=n("filter")(e,s)};var l=!1;t.createTest=function(){l?(t.createTestClass="",s(function(){t.displayBlock=""},500),l=!1):(t.displayBlock="display-block",s(function(){t.createTestClass="display-create"},100),l=!0)},t.deleteTest=function(e,n){t.component=a.delete({testPlanId:e,testId:n},function s(){o.query({testPlanId:e},function n(e){t.tests=e}),socket.emit("get:stats")})},t.moreTests=function(){if(t.tests){if(t.busy)return;t.busy=!0;var e=t.tests[t.tests.length-1].pk_test;o.query({after:e},function n(e){e[0]&&t.tests.push(e[0]),t.busy=!1})}}}),app.controller("TestNewCtrl",function(t,e,n,s,o){t.heading="Create New Test",t.submitLabel="Create Test",t.test_plan=e.testPlanId,t.test={fk_test_plan:e.testPlanId,name:"",description:""},t.testSubmit=function(){t.test=s.save({testPlanId:e.testPlanId},t.test,function a(){n.path("test_plans/"+e.testPlanId),o.emit("get:stats")},function l(){console.log("Error: failed to save test.")})}}),app.controller("TestViewCtrl",function(t,e,n){t.test_plan=e.testPlanId,t.test=n.get({testPlanId:e.testPlanId,testId:e.testId})}),app.controller("TestEditCtrl",function(t,e,n,s){t.heading="Update Test",t.submitLabel="Update Test",t.test_plan=e.testPlanId,t.test=s.get({testPlanId:e.testPlanId,testId:e.testId}),t.testSubmit=function(){t.test=s.save({testPlanId:e.testPlanId,testId:e.testId},t.test,function o(){n.path("test_plans/"+e.testPlanId)},function a(){console.log("Error: failed to update test")})}}),app.controller("TestDeleteCtrl",function(t,e,n,s,o){t.component=s.delete({testPlanId:e.testPlanId,testId:e.testId},function a(){n.path("test_plans/"+e.testPlanId),o.emit("get:stats")})});